<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FutureCreek | Styx Creek Field Map</title>
  <meta name="description" content="Explore Styx Creek through an interactive hand-drawn map and field media." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Special+Elite&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="grain" aria-hidden="true"></div>

  <header class="topbar">
    <div>
      <p class="eyebrow">Craig's Future.Creek Archive</p>
      <h1>Styx Creek</h1>
      <p class="subhead">Nesbitt Park, Kotara</p>
    </div>
    <div class="topbar-actions">
      <button id="togglePlaceMode" class="trail-btn" type="button" hidden>Place Media</button>
    </div>
  </header>

  <main class="layout">
    <section class="map-panel" aria-label="Interactive map">
      <div class="map-frame" id="mapFrame">
        <img id="baseMap" src="assets/Map.jpg" alt="Hand-drawn map of Styx Creek" />
        <svg class="trail" id="trail" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
          <path id="trailPath" d="" />
          <g id="trailGuide"></g>
        </svg>
        <div id="pointLayer" class="point-layer" aria-label="Map media locations"></div>
        <section id="placementPanel" class="placement-panel" hidden>
          <p class="placement-title">Placement Mode</p>
          <p class="placement-copy">Choose an item, then click the map to set coordinates.</p>
          <label class="placement-label" for="placementSelect">Media Item</label>
          <select id="placementSelect"></select>
          <div class="placement-actions">
            <button id="copyPlacementData" type="button">Copy Placement JSON</button>
            <button id="donePlacement" type="button">Done</button>
          </div>
        </section>
      </div>
    </section>

    <aside class="rail" aria-label="Media locations">
      <h2>Explore</h2>
      <p class="rail-copy">Tap media on the map to look closer.</p>
      <div id="pointList" class="point-list"></div>
    </aside>
  </main>

  <dialog id="viewer" class="viewer">
    <button id="viewerPrev" class="viewer-nav viewer-prev" type="button" aria-label="Previous media">Prev</button>
    <button id="viewerNext" class="viewer-nav viewer-next" type="button" aria-label="Next media">Next</button>
    <button id="closeViewer" class="close-btn" type="button" aria-label="Close viewer">Close</button>
    <div class="viewer-media" id="viewerMedia"></div>
    <div class="viewer-meta">
      <h3 id="viewerTitle"></h3>
      <p id="viewerCaption"></p>
      <p id="viewerDate" class="viewer-date"></p>
    </div>
  </dialog>

  <dialog id="acknowledgementModal" class="acknowledgement-modal" aria-label="Acknowledgement of Country">
    <div class="acknowledgement-card">
      <h2>Acknowledgement of Country</h2>
      <p>
        I would like to acknowledge the Traditional Owners and Custodians of Country throughout Australia, which for
        the mob of this map are the Awabakal people, and to recognise their continuing connection to the land, sea,
        waterways and community. We pay our respects to them and their cultures; and to their Elders past and present.
      </p>
      <button id="acknowledgementButton" type="button">Acknowledge</button>
    </div>
  </dialog>

  <template id="pointButtonTemplate">
    <button class="point point-card" type="button">
      <span class="pin-stem" aria-hidden="true"></span>
      <span class="pin-body">
        <span class="pin-media"></span>
        <span class="pin-meta">
          <span class="point-label"></span>
        </span>
        <span class="pin-play-badge" aria-hidden="true">Play</span>
      </span>
    </button>
  </template>

  <template id="listItemTemplate">
    <button class="stop-card" type="button">
      <span class="stop-title"></span>
      <span class="stop-meta"></span>
    </button>
  </template>

  <script src="app.js" type="module"></script>
</body>
</html>
